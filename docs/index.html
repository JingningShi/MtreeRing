<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>A Shiny Application for Automatic Measurements of Tree-Ring Widths on Digital Images â€¢ MtreeRing</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="A Shiny Application for Automatic Measurements of Tree-Ring Widths on Digital Images">
<meta property="og:description" content="Use morphological image processing and edge detection algorithms to automatically measure tree ring widths on digital images. Users can also manually mark tree rings on species with complex anatomical structures. The arcs of inner-rings and angles of successive inclined ring boundaries are used to correct ring-width series. The package provides a Shiny-based application, allowing R beginners to easily analyze tree ring images and export ring-width series in standard file formats.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">MtreeRing</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.4.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/app-MtreeRing.html">A Simple Workflow for Shiny App</a>
    </li>
    <li>
      <a href="articles/detection-MtreeRing.html">MtreeRing: Measuring Tree Ring Width in R</a>
    </li>
    <li>
      <a href="articles/pith-MtreeRing.html">Measure Tree Rings on Pith Side</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/MtreeRing">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="contents col-md-9">
<div id="mtreering" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#mtreering" class="anchor"></a>MtreeRing</h1></div>
<!--require(knitr);require(markdown);knit("README.Rmd")-->
<p><strong>Authors:</strong> <a href="https://www.researchgate.net/profile/Jingning_Shi">Jingning Shi</a>, <a href="https://www.researchgate.net/profile/Wei_Xiang15">Wei Xiang</a><br><strong>License:</strong> <a href="https://cran.r-project.org/web/licenses/GPL-3">GPL3</a></p>
<!--pkg badges-->
<p><a href="https://travis-ci.org/ropensci/MtreeRing.svg?branch=master"><img src="https://travis-ci.org/ropensci/MtreeRing.svg?branch=master" alt="TravisCI Build Status"></a> <a href="https://ci.appveyor.com/project/JingningShi/MtreeRing"><img src="https://ci.appveyor.com/api/projects/status/cti7i110hecl8kpf?svg=true" alt="AppVeyor Build Status"></a> <a href="https://codecov.io/github/ropensci/MtreeRing?branch=master"><img src="https://codecov.io/github/ropensci/MtreeRing/coverage.svg?branch=master" alt="codecov"></a> <a href="https://github.com/ropensci/software-review/issues/287"><img src="https://badges.ropensci.org/287_status.svg" alt="ropensci"></a> <a href="https://cranchecks.info/pkgs/MtreeRing"><img src="https://cranchecks.info/badges/worst/MtreeRing" alt="cran checks"></a> <a href="https://CRAN.R-project.org/package=MtreeRing"><img src="https://cranlogs.r-pkg.org/badges/MtreeRing" alt="Downloads"></a></p>
<p><code>MtreeRing</code> is a tool for automatically measuring tree-ring width using image processing techniques.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>Install the stable version from CRAN</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">"MtreeRing"</span>)</code></pre></div>
<p>or the development version from GitHub</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># install.packages("devtools")</span>
devtools<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/devtools/topics/reexports">install_github</a></span>(<span class="st">"ropensci/MtreeRing"</span>)</code></pre></div>
</div>
<div id="ring-width-measurement" class="section level2">
<h2 class="hasAnchor">
<a href="#ring-width-measurement" class="anchor"></a>Ring-width measurement</h2>
<div id="read-an-image" class="section level3">
<h3 class="hasAnchor">
<a href="#read-an-image" class="anchor"></a>1. Read an image</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(MtreeRing)
## Read and plot a tree ring image
img.name &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/system.file">system.file</a></span>(<span class="st">"001.png"</span>, <span class="dt">package =</span> <span class="st">"MtreeRing"</span>)
t1 &lt;-<span class="st"> </span><span class="kw"><a href="reference/ring_read.html">ring_read</a></span>(<span class="dt">img =</span> img.name, <span class="dt">dpi =</span> <span class="dv">1200</span>, <span class="dt">plot =</span> <span class="ot">TRUE</span>)</code></pre></div>
<p><code>ring_read</code> supports commonly used image formats, including png, tiff, jpg and bmp.</p>
</div>
<div id="detect-ring-borders" class="section level3">
<h3 class="hasAnchor">
<a href="#detect-ring-borders" class="anchor"></a>2. Detect ring borders</h3>
<p>After plotting the image, the automatic detection of ring borders can be performed using three alternative methods: (1) watershed algorithm; (2) Canny edge detector; (3) a linear detection algorithm from R package <a href="https://CRAN.R-project.org/package=measuRing">measuRing</a>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Split a long core sample into 2 pieces to
## get better display performance and use the
## watershed algorithm to detect ring borders:
t2 &lt;-<span class="st"> </span><span class="kw"><a href="reference/ring_detect.html">ring_detect</a></span>(<span class="dt">ring.data =</span> t1, <span class="dt">seg =</span> <span class="dv">2</span>, <span class="dt">method =</span> <span class="st">'watershed'</span>)</code></pre></div>
<center><img src="/articles/img/README-img001.png" width="65%" height="65%"></center>
<center>Figure 1. The automatic detection of ring borders</center>
</div>
<div id="calculate-ring-width-series" class="section level3">
<h3 class="hasAnchor">
<a href="#calculate-ring-width-series" class="anchor"></a>3. Calculate ring-width series</h3>
<p>If all ring borders are correctly identified, you can generate a ring-width series in data frame format. Use <code>write.rwl</code> to export the ring-width series to an rwl file.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rw.df &lt;-<span class="st"> </span><span class="kw"><a href="reference/ring_calculate.html">ring_calculate</a></span>(<span class="dt">ring.data =</span> t2, <span class="dt">seriesID =</span> <span class="st">"940220"</span>)
<span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(dplR) <span class="co"># A dendrochronological analysis package</span>
fn &lt;-<span class="st"> </span><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/tempfile">tempfile</a></span>(<span class="dt">fileext=</span><span class="st">".rwl"</span>)
<span class="kw">write.rwl</span>(<span class="dt">rwl.df =</span> rw.df, <span class="dt">fname =</span> fn, <span class="dt">format =</span> <span class="st">"tucson"</span>)</code></pre></div>
</div>
</div>
<div id="shiny-application" class="section level2">
<h2 class="hasAnchor">
<a href="#shiny-application" class="anchor"></a>Shiny application</h2>
<p>If you are not familiar with R and its command line interface, the shiny-based app is a good alternative.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">MtreeRing<span class="op">::</span><span class="kw"><a href="https://www.rdocumentation.org/packages/MtreeRing/topics/ring_app_launch">ring_app_launch</a></span>()</code></pre></div>
<p>This command allows to run a Shiny-based application within the systemâ€™s default web browser. The app provides a beginner-friendly graphical interface and supports more flexible mouse-based interactions, allowing image files to be uploaded up to 150 MB in size.</p>
<p>The dashboard has three components: a header, sidebar and body, like this</p>
<p><img src="articles/img/README-img002.png" width="85%" height="85%"></p>
<p>A workflow for the Shiny app can be found at <a href="https://ropensci.github.io/MtreeRing/articles/app-MtreeRing.html" class="uri">https://ropensci.github.io/MtreeRing/articles/app-MtreeRing.html</a>. Most steps are demonstrated with a gif to make the workflow more understandable.</p>
</div>
<div id="ring-width-correction" class="section level2">
<h2 class="hasAnchor">
<a href="#ring-width-correction" class="anchor"></a>Ring width correction</h2>
<p>If an increment borer is used to extract samples, it is well known that the auger sometimes fails to traverse the pith of the sampled tree but passes through one side of the pith at a certain distance. Tangent lines of rings close to the pith are therefore not perpendicular to the horizontal path, which may lead to considerable errors in ring widths.</p>
<p>Under such conditions, you can create two paths by setting the argument <code>incline = TRUE</code>, or by ticking the checkbox <strong>Inclined tree rings</strong>. See this example.</p>
<p><img src="articles/img/RingCorrection.png" width="80%" height="80%"></p>
<p>The line segment connecting two dots on the same ring should match the tangent of a tree ring border. The corrected ring width is estimated from the distance between adjacent rings and orientation of ring borders.</p>
</div>
<div id="support" class="section level2">
<h2 class="hasAnchor">
<a href="#support" class="anchor"></a>Support</h2>
<p>Any feedback, bug reports or suggestions are welcomed. If you have a comment on <code>MtreeRing</code>, or you find a bug in the released or beta versions, please submit bugs and/or feature requests at <a href="https://github.com/ropensci/MtreeRing/issues" class="uri">https://github.com/ropensci/MtreeRing/issues</a>. Include the package version, OS, and any command-line required to reproduce the problem.</p>
</div>
<div id="code-of-conduct" class="section level2">
<h2 class="hasAnchor">
<a href="#code-of-conduct" class="anchor"></a>Code of conduct</h2>
<p>I will try to add new features based on user feedback. It is hoped that others will contribute additional useful features. Please note that the â€˜MtreeRingâ€™ project is released with a <a href="CODE_OF_CONDUCT.html">Contributor Code of Conduct</a>. By contributing to this project, you agree to abide by its terms.</p>
<p><a href="https://ropensci.org"><img src="https://ropensci.org/public_images/ropensci_footer.png" alt="ropensci_footer"></a></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=MtreeRing">https://â€‹cloud.r-project.org/â€‹package=MtreeRing</a>
</li>
<li>Browse source code at <br><a href="https://github.com/ropensci/MtreeRing">https://â€‹github.com/â€‹ropensci/â€‹MtreeRing</a>
</li>
<li>Report a bug at <br><a href="https://github.com/ropensci/MtreeRing/issues">https://â€‹github.com/â€‹ropensci/â€‹MtreeRing/â€‹issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Jingning Shi <br><small class="roles"> Author, maintainer </small>  </li>
<li>Wei Xiang <br><small class="roles"> Author </small>  </li>
</ul>
</div>

  </div>
</div>

      <footer><div class="copyright">
  <p>Developed by Jingning Shi, Wei Xiang.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
